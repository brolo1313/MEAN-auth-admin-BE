<!DOCTYPE html>
<html lang="en">
  <%- include('./partials/head.ejs') %>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;700&display=swap");
    * {
      margin: 0;
      padding: 0;
      -webkit-box-sizing: border-box;
      box-sizing: border-box;
    }

    body {
      font-family: "Source Sans Pro", sans-serif;
    }

    a {
      text-decoration: none;
    }

    img[alt] {
      text-indent: -10000px;
    }

    .container {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -ms-flex-wrap: wrap;
      flex-wrap: wrap;
      -webkit-box-pack: center;
      -ms-flex-pack: center;
      justify-content: center;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
    }

    @media screen and (max-width: 600px) {
      .container {
        margin: -0.5rem;
      }
    }

    .card {
      background-color: #f5f8fc;
      -webkit-box-shadow: 0 0 transparent, 0 0 transparent,
        0 0.375rem 0.375rem -0.125rem rgba(168, 179, 207, 0.4);
      box-shadow: 0 0 transparent, 0 0 transparent,
        0 0.375rem 0.375rem -0.125rem rgba(168, 179, 207, 0.4);
      padding: 0.5rem;
      border-radius: 1rem;
      border: 1px solid rgba(82, 88, 102, 0.2);
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: vertical;
      -webkit-box-direction: normal;
      -ms-flex-direction: column;
      flex-direction: column;
      -ms-flex-pack: distribute;
      justify-content: space-around;
      width: 330px;
      height: auto;
      -webkit-transition: all 0.2s ease;
      transition: all 0.2s ease;
      margin: 2rem;
    }

    .card__header {
      margin-bottom: 1rem;
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: vertical;
      -webkit-box-direction: normal;
      -ms-flex-direction: column;
      flex-direction: column;
      margin: 0.5rem 0 0.5rem 0.5rem;
    }

    .card__header .header__img {
      height: 2rem;
      width: 2rem;
      -o-object-fit: cover;
      object-fit: cover;
      border-radius: 50%;
    }

    .card__header .header__title {
      font-size: 1.0625rem;
      line-height: 1.375rem;
      color: #0e1217;
      font-weight: 700;
      margin: 0.5rem;
    }

    .card__body {
      margin: 0 0.5rem;
    }

    .card__body .body__text {
      color: #525866;
      font-size: 0.8125rem;
    }

    .card__body .body__img {
      height: 10rem;
      margin: 0.5rem 0;
    }

    .card__body .body__img img {
      width: 100%;
      height: 100%;
      -o-object-fit: cover;
      object-fit: cover;
      margin: auto;
      border-radius: 0.75rem;
    }

    .card__footer {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -ms-flex-pack: distribute;
      justify-content: space-around;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin: 0.5rem;
    }

    .card:hover {
      border-color: rgba(82, 88, 102, 0.4);
    }

    ion-icon {
      font-size: 1.5rem;
      color: #525866;
      cursor: pointer;
      -webkit-transition: color 0.2s ease;
      transition: color 0.2s ease;
    }

    ion-icon:hover:nth-of-type(1) {
      color: #15ce5c;
    }

    ion-icon:hover:nth-of-type(2) {
      color: #15ce5c;
    }

    ion-icon:hover:nth-of-type(3) {
      color: #fa6620;
    }

    .skeleton {
      -webkit-animation: skeleton-loading 1s linear infinite alternate;
      animation: skeleton-loading 1s linear infinite alternate;
    }

    @-webkit-keyframes skeleton-loading {
      0% {
        background-color: #c2cfd6;
      }
      100% {
        background-color: #f0f3f5;
      }
    }

    @keyframes skeleton-loading {
      0% {
        background-color: #c2cfd6;
      }
      100% {
        background-color: #f0f3f5;
      }
    }

    .skeleton-text {
      width: 100%;
      height: 0.7rem;
      margin-bottom: 0.5rem;
      border-radius: 0.25rem;
    }

    .skeleton-text__body {
      width: 75%;
    }

    .skeleton-footer {
      width: 30%;
    }
  </style>
  <body>
    <%- include('./partials/header.ejs') %>
    <div class="page_container">
      <h1 id="title"></h1>
      <p id="description"></p>

      <div style="min-height: 100px">
        <button onclick="fetchData()">get data</button>
        <button onclick="addedData()">added page title</button>
      </div>

      <div class="container">
        <!-- <h1>Home page</h1>
        <p>Hello it's a site home page</p>
  
        <% if (homeMocks.length) { %> <% homeMocks.forEach(({ link, name }) => {
        %>
        <li>
          <a href="<%= link %>"><%= name %></a>
        </li>
        <% }) %> <% } %> -->
        <template id="card-template">
          <a
            class="card"
            id="card-link"
            target="_blank"
          >
            <div class="card__header">
              <div>
                <img
                  class="header__img skeleton"
                  id="logo-img"
                  alt=""
                />
              </div>
              <h3
                class="card__header header__title"
                id="card-title"
              >
                <div class="skeleton skeleton-text"></div>
                <div class="skeleton skeleton-text"></div>
              </h3>
            </div>

            <div class="card__body">
              <div
                class="card__body body__text"
                id="card-details"
              >
                <div class="skeleton skeleton-text skeleton-text__body"></div>
              </div>

              <div class="card__body body__img">
                <img
                  class="skeleton"
                  alt=""
                  id="cover-img"
                />
              </div>
            </div>

            <div
              class="card__footer"
              id="card-footer"
            >
              <div class="skeleton skeleton-text skeleton-footer"></div>
            </div>
          </a>
        </template>
      </div>
    </div>

    <script
      type="module"
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"
    ></script>

    <script>
      //Clone the card template
      const container = document.querySelector(".container");
      const cardTemplate = document.getElementById("card-template");
      for (let i = 0; i < 2; i++) {
        container.append(cardTemplate.content.cloneNode(true));
      }

      function addedData() {
        fetch("/add-title", {
          method: "POST",
          body: JSON.stringify({
            name: "Test",
            description: "Post request",
          }),
          headers: {
            "Content-type": "application/json; charset=UTF-8",
          },
        })
          .then((response) => response.json())
          .then((json) => {
            document.getElementById("title").innerText = json.name;
            document.getElementById("description").innerText =
            json.description;
          });
      }
      function fetchData() {
        fetch("/data.json") // Adjust the path as per the location of your data.json file
          .then((response) => response.json())
          .then((posts) => {
            container.innerHTML = "";
            posts.forEach((post) => {
              const div = cardTemplate.content.cloneNode(true);
              div.getElementById("card-link").href = post.link;
              div.getElementById("logo-img").src = post.logoImage;
              div.getElementById("card-title").textContent = post.title;
              div.getElementById("card-details").textContent = post.details;
              div.getElementById("cover-img").src = post.coverImage;
              div.getElementById("card-footer").innerHTML = `
                    <ion-icon name="arrow-up"></ion-icon>
                    <ion-icon name="chatbox-ellipses"></ion-icon>
                    <ion-icon name="bookmark"></ion-icon>`;
              container.append(div);
            });
          })
          .catch((error) => {
            console.error("Error fetching data:", error);
            // Handle error, e.g., show error message to the user
          });
      }
    </script>
  </body>
</html>
